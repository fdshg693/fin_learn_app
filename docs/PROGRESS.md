# 進捗

## モデル

| ドメイン名 | クラス名 | 状態 | 備考 |
|---|---|---|---|
| 銘柄 | `Instrument` | 済 | ID による値の等価性 |
| ポジション | `Position` | 済 | 銘柄 + 数量、評価額算出 |
| ポジション集合 | `PositionSet` | 済 | 同一銘柄の自動集約、`+` 演算子 |
| ポートフォリオ | `Portfolio` | 済 | 現金 + ポジション集合、売買ロジック |
| 投資家（プレイヤー） | `Player` | 済 | 初期資産 10,000 JPY、損益算出 |
| 取引所 | `IExchange` | 済 | 価格取得 + 手数料（インターフェース） |
| エラーメッセージ | `Messages` | 済 | 日本語の定数定義 |
| 価格取得ヘルパー | `ExchangeExtensions` | 済 | `TryGetPrice` 安全な価格取得 |
| ゲーム | `Game` | 済 | ターン制の進行管理、Player への委譲 |

## アクション

| 機能 | 状態 | 実装箇所 |
|---|---|---|
| 買う（即時） | 済 | `Portfolio.Buy` / `Player.Buy` |
| 売る（即時） | 済 | `Portfolio.Sell` / `Player.Sell` |
| 手数料の徴収 | 済 | `Portfolio.Trade` 内で加減算 |
| 待つ（パス） | 済 | `Player.Wait` |

## ビジネスルール

| ルール | 状態 |
|---|---|
| 現金不足の買い注文を拒否 | 済 |
| 保有数超過の売り注文を拒否 | 済 |
| 手数料込みのバリデーション | 済 |
| ターン制の進行 | 済 |
| 株価のランダム変動 | 未着手 |
| コンピューターの自動注文 | 未着手 |
| 注文帳（オーダーブック） | 未着手 |

## テスト

| テストクラス | 対象 |
|---|---|
| `InstrumentTests` | 等価性・ハッシュコード |
| `PositionTests` | 評価額算出 |
| `PositionSetTests` | 集約・演算子・合計額 |
| `ExchangeExtensionsTests` | 安全な価格取得 |
| `PortfolioTests` | 売買・手数料・バリデーション |
| `PlayerTests` | 初期状態・損益・不変性 |
| `GameTests` | ターン進行・不変性・失敗時ターン不変 |

テストダブル: `TestExchange`（価格辞書）, `TestData`（共通フィクスチャ）

## 未実装（今後）

- 注文帳と約定ロジック
- コンピューター注文の自動生成
- 株価変動（ランダム）
- React フロントエンド
